<%- include('../components/html') %>
<%- include('../components/header') %>

<main class="w-full h-full">
    <div class="flex flex-col max-w-limit mx-auto h-full">
        <form method="post">
            <div class="flex flex-col my-2">
                <label for="name">
                    <strong>Edition name:</strong>
                </label>
                <input id="name" name="name" placeholder="X & Y" required type="text" class="border-2 border-neutral-300 p-1" value="<%= typeof edition === 'undefined' ? '' : edition.name %>">
            </div>
            <div class="flex flex-col my-2">
                <label for="shorthand">
                    <strong>Edition shorthand:</strong>
                </label>
                <input id="shorthand" name="shorthand" placeholder="XY" required type="text" class="border-2 border-neutral-300 p-1" value="<%= typeof edition === 'undefined' ? '' : edition.shorthand %>">
            </div>
            <div class="flex flex-col my-2">
                <label for="releasedate">
                    <strong>Edition release date:</strong>
                </label>
                <input id="releasedate" name="releasedate" required placeholder="dd/mm/yyyy" type="date" class="border-2 border-neutral-300 p-1" value="<%= typeof edition === 'undefined' ? '' : edition.release_date_yyyy_mm_dd %>">
            </div>
            <div class="flex flex-col my-2">
                <label for="logo">
                    <strong>Edition logo: </strong>
                </label>
                <input id="logo" name="logo" onchange="onChangeHandler(this.value)" placeholder="https://logo-url.com" required type="text" class="border-2 border-neutral-300 p-1" value="<%= typeof edition === 'undefined' ? '' : edition.logo %>">
            </div>
            <label> 
                <strong>Logo Preview:</strong>
                <img class="border-2 box-border border-neutral-300" src="<%= typeof edition === 'undefined' ? '' : edition.logo %>" onerror="this.src = '/images/placeholder.webp'" alt="" width="600" height="600" id="img-preview">
            </label>
            <button type="submit">Submit</button>
        </form>
        <% if (typeof errors !== 'undefined') { %>
            <ul>
            <% errors.forEach(error => { %>
                <li><%= error.msg %></li>
            <% }) %>
            </ul>
        <% } %>
    </div>
</main>


<script>
    const imgPreview = document.querySelector('#img-preview')
    const LogoInput = document.querySelector('#Logo')

    function onChangeHandler (val) {
        imgPreview.src = val
        console.log(val)
    }

</script>
